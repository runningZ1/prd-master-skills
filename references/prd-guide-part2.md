# 产品需求文档完整指南（二）：整体设计

**作者：** 秀明说

---

## 文章概述

在《产品需求文档完整指南（一）：核心思路》介绍了整体设计的目的：

- 让文档阅读者有整体的概念，能够让他站在更加宏观的视角理解方案。
- 为后续理解具体的功能用例提供铺垫。

本篇将主要讲述整体设计的写作思路和技巧，技巧部分会偏重于介绍图形的作用。

**什么时候应该写整体设计？**

虽然不是所有的需求都必须要写整体设计，但仍建议新手同学在每个需求都尝试着写，同时如果你的需求只要满足了以下其中一个条件，我会强烈建议一定要写。

- 涉及多个业务角色
- 横跨多个系统领域
- 涉及到了新的单据流

## 一、方案涉及到多个用户角色

### 1.1 条件

方案涉及到多个使用角色：例如一个流程中涉及了用户A和用户B

一个 **角色**（从权限管理角度是代表某一类具有相同职能的统称）能够被涉及到某个功能/流程，说明这个角色在流程中 **需要进行操作/决策**。

### 1.2 推荐的表达方式

**泳道流程图**：一种展示业务流程或工作流程的图表，表示不同的业务部门或参与者（不同系统等），以及它们之间的交互和流程。

会涉及到纵向和横向两个维度，两个维度分别表示的是角色和流程阶段，至于是纵向表示角色还是横向表示角色依据个人喜好即可。

与时序图相比，**强调角色执行的动作/逻辑判断，弱化时间顺序/系统间交互。**

### 1.3 泳道图实例

申请报销流程

- 员工提交报销申请
- 直属领导审批
- 财务部门审核
- 出纳付款

## 二、横跨多个系统/领域

### 2.1 条件

- 单个系统的多个模块（例如订单履约系统中订单、库存、商品等）
- 多个系统（例如订单履约系统和仓库管理系统）

### 2.2 推荐的表达方式

无论是什么样的表达方式，尽量使用图+文字说明的方式，让阅读者更容易理解。

#### 2.2.1 实体关系图

表明不同领域之间的关系，是1:1还是1：N还是N：1，能清晰画出模块间关系需要一定的 **垂直业务沉淀和领域抽象能力。**

- **垂直业务沉淀**：这属于知识层面的经验能力，只要去学就能学得到。
- **领域抽象能力**：抽象能力不属于知识，是一种技能，要靠悟性和大量训练。最核心的是要有给领域下定义的能力。

**不同的关系在产品设计上意味着什么?**

- 领域A与领域B的关系为1:1，这是关系中最简单的，无论从A到B还是从B到A都能找到唯一值。
- 领域A与领域B的关系为1:N，从领域A触发的时候 **要有决策的逻辑** 找到领域B中的某个值。
- 领域A与领域B的关系为N:1，从领域A触发任一值都能找到唯一，反之则不是。
- 领域A与领域B的关系为N:N，不管从A到B还是从B到A都需要有决策的逻辑，这是关系中最复杂的。

**梳理清楚关系为什么那么重要？**

- **能加强/外显对业务的理解**：领域的关系图能确保软件系统能够准确地反映业务逻辑
- **系统的可维护性**：更容易维护和更新，因为变更可以更精准地在领域模型中进行反映
- **模块化和扩展性**：不同领域之间清晰的边界和关系使得系统更容易进行模块化设计
- **有助于团队协作**：帮助不同团队成员更好地理解系统的整体结构和各个部分之间的协作方式

#### 2.2.2 时序图

时序图：描述不同领域/对象之间的交互与通信。

- 谁在什么时候请求了谁的接口，返回是什么？
- 一个动作中包含了哪些业务层面的不可缺少的服务调用，否则就从头开始？
- 是同步返回还是异步返回等？

与泳道流程图相比弱化了逻辑判断关系，但是强调了 **时间顺序**，尤其在 **多个接口调用的先后** 以及表达 **同步异步关系** 上。

## 三、方案涉及到了状态机

### 3.1 条件

当一个方案需要新增/修改状态机，一般来讲改动都较大。

状态机一般是和单据流同时出现的，之所以有单据流是因为要持续一段时间追踪某一件事，这件事会不停的变更状态来反映当前的事实。

### 3.2 推荐的表达方式

我们常用的状态机叫做有限状态机。

> 有限状态机（Finite State Machine，简称FSM）是一种数学模型和计算机科学中的概念，用于描述系统的行为。它由一组状态、一组转移规则和一个初始状态组成。

状态机描述的是活动中状态的变化，**突出的是「动作」引发「状态」变更，这对产品经理能力有3个要求：**

- 关于动作(action)：要明确知道谁在什么时候触发的动作是什么
- 关于状态(status)：要有明确的预期动作后的状态结果是什么
- 关于整体：一个单据流的状态掌握绝不仅仅是只针对自己修改的部分，关键状态的变更有可能是牵一发而动全身

### 3.3 有限状态机实例

以「电商的销售订单支付状态」简单展示下状态机如何画如何表述。

在这种流程中一般会建议加上开始和终止，尤其终止表示了某个状态为终态，终态是不可以再变更的。

状态包括：新建、待支付、已支付、待发货、已发货、取消等

## 四、复杂功能的本质说明

为了进一步明确表达我需求的核心诉求，往往我会把最核心的东西写出来。

## 五、多个方案的选用记录

有时候一个问题可以有种模式和方案构成，我习惯于将不同的方案全部罗列出来，甚至标记出优劣势，最后再给出结论。

这样做的好处是：

- **强化自己的思考：** 真正想清楚到底应该用什么方案。
- **用来说服别人**：当你的老板、业务方、研测试同事看到你的优劣势对比时，他会能知道你是技能是专业的、态度是积极的从而更容易获取信任。
- **告知以后读文档的人**：为什么"不得不"做出的「最符合当时情况的决策」。

## 六、功能地图：脑图/用例图

脑图和用例图均是为了有层次的表述全盘的功能点。

### 6.1 脑图

倾向于结构性的罗列出此次功能所包含的所有要点，阅读的人一目了然的知道本次功能不同层级的功能是什么。

### 6.2 用例图

倾向于从用户的角度出发能够执行的动作。当一个功能较大需要不同的角色介入时，从不同角色触发的用例图可以让阅读者知道这里包含了一定的「权限」范围，以及不同的角色需要处理的事情具体是什么。

## 总结

以上就说关于整体设计的部分，这个系列的第三篇文章将会为大家介绍关于《产品需求文档：需求详情》的写作技巧。

整体设计是PRD文档中承上启下的重要环节，它能够帮助团队成员：

1. 建立整体概念和宏观视角
2. 理解各角色和系统间的关系
3. 明确状态变化和流程逻辑
4. 为后续详细设计提供基础

**关键图表工具：**
- 泳道流程图：展示多角色业务流程
- 实体关系图：描述系统模块关系
- 时序图：说明系统间交互顺序
- 状态机图：表现状态变化逻辑
- 脑图/用例图：梳理功能结构

---

**版权声明：** 本文由 @秀明 原创发布于人人都是产品经理。
