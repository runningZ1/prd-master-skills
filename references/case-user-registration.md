# 【案例：用户注册】 V3.0

## 修改记录

| 版本号 | 修改日期 | 改动点描述 | 修改人 |
|--------|----------|------------|--------|
| V0.1 | 2025/1/16 | 几乎纯文字<br/>此版本几乎不不具备可开发性 | 秀明说 |
| V1.0 | 2025/1/19 | 在V0.1的基础上,增加<br/>• 有基础计算机的认知:<br/>◦ 前置条件(条件)<br/>◦ 动作<br/>◦ 后置条件(预期)<br/>• 有格式的意识(推荐Markdown)<br/>• 有流程的意识:基础流程图会画<br/>◦ 流程里的判断节点<br/>◦ 注意异常流程<br/>◦ 流程能自洽 | 秀明说 |
| V2.0 | 2025/1/20 | • 照顾阅读者:体现在格式、排版、标记等(没有技巧,全靠用心)<br/>• 逻辑:自洽的基础上要有很好的兼容意识,跨模块/部门合作。(体现在时序图)<br/>• 交互:在意细节且表述明确<br/>• 有更深的数据表、字段层面的认知(例子中的UID),且知晓常用的表和字段 | 秀明说 |
| V3.0 | 2025/1/20 | • 更重视需求背景的阐述<br/>◦ 说服自己去做好这个需求<br/>◦ 说服同事重视这个需求(高优先级)<br/>• 有模块/领域意识,要有整体设计<br/>• 表达精准:参考自然语言的二义性那一期视频<br/>• 具备框架性、拓展性意识:能够搭架子,方便后续维护<br/>• 站在用户角度想问题,在乎交互体验 | 秀明说 |

---

## 需求背景

### 背景

业务反馈,新用户增长慢:

1. 每个新用户从签约到使用最少要3天时间。
2. 需要有1个专人每天帮助用户开通新账号,流程繁琐和枯燥,释放此人力可以做其他的事情。
3. 由于注册时间长,有一些用户等不急用了其他的产品。

### 问题

现在没有注册新用户流程,全部都是在后台开的账号。

### 价值

新用户可以注册,增加拉新效率:

1. 明年的公司的目标的新用户翻倍,假设此预期的节奏推广,用户注册会成为明年整个公司拓客的卡点,因此必须要优化。
2. 可以节省1~2个人力专门处理此事
3. 后续公司需要尝试裂变营销,老客户带新客户,因此注册功能是必保的核心基础功能

### 目的

通过实现注册功能,提升注册效率,从3天缩短到1分钟。

---

## 整体设计

### 1、注册模块

注册流程是及基础的功能,因此本期在实现注册的同时也会将此流程作为基础服务,供其他的流程调用。

```
┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐
│ 登录页  │  │ 视频页  │  │拉新活动 │  │  ......  │
└────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘
     │            │            │            │
     └────────────┴────────────┴────────────┘
                       │
                  ┌────▼────┐
                  │注册服务 │
                  └─────────┘
```

- 目前已知有登录页、视频页、拉新活动都会使用此服务,后续其他的页面也都可以使用。
- 不同的页面使用注册页成功注册后,所期望的跳转页面都不同:
  - 登录页:默认跳转首页
  - 视频页:需跳转到分享的那个视频页面
  - 拉新活动:需跳转到分享的那个活动

因此,在给外部提供标准服务时,能够通过某种机制,例如在URL中拼接视频的唯一ID,实现注册完成后跳转到服务应用方所期望的那个地方。

### 2、短信服务商路由机制

> 👍 虽然本次不做,但是提前布局是没问题的,也让研测等同事知晓你的规划

本次由于时间关系,仅对接了服务商XX

- 该服务商的CN地区的,短信送达率比较高,费用便宜
- 涉及到海外的邮件发送要么是不支持要么是资费太贵

后续我们会考虑通过对接多家服务商来平衡送达率和费用,因此后续在调用短信服务商的时候需要有一个路由机制:即可以配置不同国家/地区,使用不同的短信服务商。

---

## 功能清单

| 序号 | 功能点 | 优先级 | 备注 |
|------|--------|--------|------|
| 1 | 注册 | P0 | |

---

## 需求描述

### 1、注册功能

#### 1.1 原型

```
┌──────────────────────────────────────┐
│                                      │
│         注册新账号                    │
│                                      │
│  ┌──────────────────────────────┐   │
│  │ 请输入手机号码                │   │
│  └──────────────────────────────┘   │
│                                      │
│  ┌──────────────────┬──────────┐   │
│  │ 验证码            │发送验证码│   │
│  └──────────────────┴──────────┘   │
│                                      │
│  ┌──────────────────────────────┐   │
│  │          注册              │   │
│  └──────────────────────────────┘   │
│                                      │
└──────────────────────────────────────┘
```

#### 1.2 用户操作流程说明

1. 用户在登录页点击【注册新账号】进入到注册页面
2. 用户填写手机号码并点击【发送验证码】:检查手机号格式,检查次手机号是否已经注册过

   a. 当「手机号填写正确」且「手机号未注册过」(条件):则会触发短信验证码发送(动作),预期用户所填写的手机号能收到验证码(预期)

      i. 若发送成功则展示Toast:验证码已发送,并且此时按钮置灰不能点击,显示60s倒计时

      ii. 若发送失败则展示Toast:验证码发送异常,请重试

   b. 当填写的手机号码不正确时(条件),不会触发短信验证码发送(动作),预期用户会收到提醒,文案:请输入正确的手机号码(预期)

   c. 当填写的手机号已经注册过时(条件),报错(预期),文案:该手机号已注册

3. 用户填写验证码
4. 用户点击【注册】,需做校验逻辑:

   a. 验证码有效(条件),则注册成功(动作),并跳转到首页(预期),同时Toast提醒:注册成功

   b. 验证码无效(条件),则注册失败,并报错(动作),文案:验证码无效,请重新获取(预期),停留在当前页面。

#### 1.3 字段填写说明

| 字段 | 必填性 | 样式 | 逻辑 | 校验逻辑及报错 | 备注 |
|------|--------|------|------|----------------|------|
| 手机号码 | 必填 | 文本框<br/>Placehoder:请输入手机号码 | 默认为空 | • 必填,若不填写则报错:请填写手机号<br/>• 格式校验<br/>◦ 11位纯数字<br/>◦ 前三位数字校验 | |
| 验证码 | 必填 | 文本框<br/>Placehoder:请填写验证码 | 默认为空 | • 必填,若不填写则报错:请填写验证码<br/>• 生成与校验:<br/>◦ 验证码为6位纯数字<br/>◦ 绑定手机号与验证码关系<br/>◦ 关系保留时间为10分钟<br/>◦ 10分钟之内相同手机号重复触发,不会生成新的验证码 | |

#### 1.4 验证码生成+使用短信服务

> 💢 与用户相关的操作、校验和报错已体现在用例1.2中,本用例主要说明系统间交互以及接口相关。

账号中心是指的在次需求之上需要建立的一个服务(这里已经有了领域、服务的意识)

**时序图说明**：

1. 用户点击【发送验证码】触发账号中心逻辑
2. 验证手机号有效性:手机位数 + 手机是否存在
3. 生成验证码,绑定手机号和验证码的关系
4. 组装短信内容并调用短信服务商:
   - 调用短信服务商接口:`send_sms`
   - 入参:`phone_number`, `sms_info`
   - 出参:`Status = success` 或 `Status = fail`
5. 识别结果,并根据不同结果给用户反馈
6. 用户手机收到验证码并填写
7. 用户提交注册请求
   - 再次验证手机号的有效性
   - 验证手机号和验证码之间的关系
   - 创建新账号:UID + 手机号 + 默认密码
   - 注册结果:根据不同结果给用户不同的引导
8. 注册成功后,跳转到首页

#### 1.5 短信内容

**文案:**

欢迎注册XXX,短信验证码为:XXXXXX,有效期10分钟。

---

## 非功能性要求

### 性能要求

无

### 应用端兼容性要求

只支持PC端即可,移动端暂时不需要

### 监控要求

无

---

## 案例亮点总结

这个案例展示了PRD文档从V0.1到V3.0的演进过程，体现了以下关键点：

### 1. 需求背景的重要性
- 清晰说明业务痛点（3天注册时间、人力浪费）
- 量化价值（节省1-2人力、支持用户翻倍目标）
- 明确目的（从3天缩短到1分钟）

### 2. 整体设计的前瞻性
- 将注册设计为基础服务，可被多个模块调用
- 考虑未来扩展（短信服务商路由机制）
- 体现架构思维和领域意识

### 3. 表达的精准性
- 使用"条件-动作-预期"三段式
- 字段说明表格化，清晰明确
- 时序图展示系统间交互

### 4. 细节的完整性
- 考虑异常流程（发送失败、验证码无效）
- 明确交互细节（Toast提示、按钮置灰、倒计时）
- 数据层面的设计（UID、验证码有效期）

### 5. 可开发性
- 接口定义清晰（入参、出参）
- 数据表设计明确
- 业务逻辑完整可实现

这个案例是学习PRD编写的优秀范例，展示了从业务需求到技术实现的完整思路。
